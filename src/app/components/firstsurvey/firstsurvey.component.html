<div class="content">
<mat-stepper linear #stepper>
  <mat-step [stepControl]="userFormGroup" state="chat">
    <form [formGroup]="userFormGroup">
      <ng-template matStepLabel>여행자 정보</ng-template>
      
      <div class="form-container">

<!-- <div class="question-container">
      <p class="header">생일을 알려주세요</p>
      <mat-form-field  class="from" appearance="fill">
    <mat-label>3/4/1992</mat-label>
        <input matInput [matDatepicker]="birthday" formControlName="birthCtrl" disabled>
        <mat-datepicker-toggle matSuffix [for]="birthday"></mat-datepicker-toggle>
        <mat-datepicker #birthday disabled="false"></mat-datepicker>
      </mat-form-field>
    </div> -->

    <div class="question-container">
      <p class="header">메일을 알려주세요</p>
      <mat-form-field class="from" appearance="fill">
        <!-- <mat-label>이름</mat-label> -->
        <input type="email" matInput placeholder="도미니@jeju.com" formControlName="emailCtrl"  [errorStateMatcher]="matcher" required>
        <mat-error *ngIf="emailFormControl.hasError('email') && !emailFormControl.hasError('required')">
          Please enter a valid email address
        </mat-error>
        <mat-error *ngIf="emailFormControl.hasError('required')">
          새로운 이벤트가 생길때마다 알려드릴게요! <strong></strong>
        </mat-error>
      </mat-form-field>
    </div>
    <div class="question-container">
      <p class="header">나이를 알려주세요</p>
      <mat-form-field class="from" appearance="fill">
        <input matInput placeholder="31" formControlName="nameCtrl" required>
      </mat-form-field>
    </div>
      </div>
      <div>
        <!-- <img mat-button src="../../../assets/img/next-button.png" matStepperNext alt="next"> -->
        <button mat-button matStepperNext>
          <img class="icon"
          src="../../../assets/img/next-button.png" alt="next">
        </button>
      </div>
    </form>
  </mat-step>

  <mat-step [stepControl]="payFormGroup" errorMessage="ㅠㅠ">
    <form [formGroup]="payFormGroup">
      <ng-template matStepLabel>결제 정보</ng-template>

      <div class="form-container" [ngStyle]="{'flex-direction': !IS_MOBILE ? 'row' : 'column', 'flex-wrap': !IS_MOBILE ? 'wrap': 'nowrap'}">

<div class="question-container" [ngStyle]="{'min-width': !IS_MOBILE ? '50%' : '90%'}">
  <p class="header">갖고 계신 카드가 뭔가요?</p>
      <div class="mat-form-field" appearance="fill">
        <section class="example-section" [formGroup]="payFormGroup">
          <!-- <h4>Select your toppings:</h4> -->
          
          <p><mat-checkbox formControlName="card_samsung">삼성카드</mat-checkbox></p>
          <p><mat-checkbox formControlName="card_shinhan">신한카드</mat-checkbox></p>
          <p><mat-checkbox formControlName="card_kb">국민카드</mat-checkbox></p>
          <p><mat-checkbox formControlName="card_bc">비씨카드</mat-checkbox></p>
          <p><mat-checkbox formControlName="card_hyundai">현대카드</mat-checkbox></p>
          <p><mat-checkbox formControlName="card_nh">농협카드</mat-checkbox></p>
          <p><mat-checkbox formControlName="card_lotte">롯데카드</mat-checkbox></p>
          <p><mat-checkbox formControlName="card_woori">우리카드</mat-checkbox></p>
          </section>
      </div>
</div>

<div class="question-container" [ngStyle]="{'min-width': !IS_MOBILE ? '50%' : '90%'}">
  <p class="header">통신사는 어디 쓰세요?</p>
       <div class="mat-form-field" appearance="fill">
        <section class="example-section" [formGroup]="payFormGroup">
          <p><mat-checkbox formControlName="mc_skt">SKT</mat-checkbox></p>
          <p><mat-checkbox formControlName="mc_kt">KT</mat-checkbox></p>
          <p><mat-checkbox formControlName="mc_lgu">LG U+</mat-checkbox></p>
          <p><mat-checkbox formControlName="mc_vip">혹시 VIP 회원이신가요?</mat-checkbox></p>
        </section>
      </div>

    </div>

<div class="question-container" [ngStyle]="{'min-width': !IS_MOBILE ? '50%' : '90%'}">
  <p class="header">페이앱 쓰시는 곳 있나요?</p>
      <div class="mat-form-field" appearance="fill">
        <section class="example-section" [formGroup]="payFormGroup">
          <p><mat-checkbox formControlName="pay_kakao">카카오페이</mat-checkbox></p>
          <p><mat-checkbox formControlName="pay_naver">네이버페이</mat-checkbox></p>
          <p><mat-checkbox formControlName="pay_payco">페이코</mat-checkbox></p>
          <p><mat-checkbox formControlName="pay_smile">스마일페이</mat-checkbox></p>
        </section>
      </div>
      
    </div>
      </div>
      <div>
        <button mat-button matStepperPrevious>
          <img class="icon"
          src="../../../assets/img/previous.png" alt="prev">
        </button>
        <button mat-button matStepperNext>
          <img class="icon"
          src="../../../assets/img/next-button.png" alt="next">
        </button>
      </div>
    </form>
  </mat-step>

  <mat-step [stepControl]="flightFormGroup" errorMessage="ㅠㅠ">
    <form [formGroup]="flightFormGroup">
      <ng-template matStepLabel>여행 정보</ng-template>

      <div class="form-container">

<div class="question-container">
  <p class="header">동행자는 몇 명이예요?</p>
      <mat-form-field appearance="fill">
        <input  type="number" matInput placeholder="" formControlName="passengerCtrl" required>
      </mat-form-field>
</div>

<div class="question-container">
  <p class="header">여행 출발 날짜가 언제예요?</p>
      <mat-form-field appearance="fill">
        <mat-label>김포 -> 제주 출발 날짜</mat-label>
        <input matInput [matDatepicker]="start_date" formControlName="travelstartdateCtrl" disabled>
        <mat-datepicker-toggle matSuffix [for]="start_date"></mat-datepicker-toggle>
        <mat-datepicker #start_date disabled="false"></mat-datepicker>
      </mat-form-field>
</div>

<div class="question-container">
  <p class="header">여행 복귀 날짜는 언제예요?</p>
      <mat-form-field appearance="fill">
        <mat-label>제주 -> 김포 출발 날짜</mat-label>
        <input matInput [matDatepicker]="end_date"  formControlName="travelenddateCtrl" disabled>
        <mat-datepicker-toggle matSuffix [for]="end_date"></mat-datepicker-toggle>
        <mat-datepicker #end_date disabled="false"></mat-datepicker>
      </mat-form-field>
      </div>
      </div>
      <div>
        <button mat-button matStepperPrevious>
          <img class="icon"
          src="../../../assets/img/previous.png" alt="prev">
        </button>
        <button mat-button matStepperNext  (click)="onClickComplete()">
          <img class="icon"
          src="../../../assets/img/next-button.png" alt="next">
        </button></div>
    </form>
  </mat-step>

  <mat-step>
    
    <ng-template matStepLabel>완료</ng-template>
    <div *ngIf="!getData">
    <p>감사합니다. 조금만 기다려주세요.</p>
  </div>
  
    <div *ngIf="getData">
    <p style="margin-top: 30px;">내가 바로 받을 수 있는 혜택!</p>
    <div *ngFor="let event of matchEventList">
        <div class="result-container">
          <span style="color: midnightblue;">{{event.airline}} 항공 </span><br><span style="color: firebrick;">{{event.discount}}</span>원 할인 이벤트
          <button mat-button (click)="onClickLink(event.link)">
            <img class="icon" style="margin-top: 0px; margin-left: 10px; width: 40%;"
            src="../../../assets/img/link.png" alt="link">
          </button>
        </div>
    </div>

    <!-- <p>조금만 노력하면 받을 수 있는 혜택!</p>
    <div *ngFor="let event of oneStepEventList">
      <p>{{event.need_to_add}} 한다면?</p>
        <p>{{event.airline}} 항공 {{event.discount}}원 할인 이벤트</p>
    </div> -->
  </div>

    <div style="margin-top: 30px;">
      <button mat-button matStepperPrevious>
        <img class="icon"
        src="../../../assets/img/previous.png" alt="prev">
      </button>
      <button mat-button (click)="stepper.reset()">
        <img class="icon"
        src="../../../assets/img/refresh.png" alt="refresh">
      </button>
    </div>
  </mat-step>

  <ng-template matStepperIcon="phone">
    <mat-icon>call_end</mat-icon>
  </ng-template>
  <ng-template matStepperIcon="chat">
    <mat-icon>forum</mat-icon>
  </ng-template>
</mat-stepper>
</div>